<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>My App</title>
  <!-- We will include related CSS styles using JavaScript -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="lib/framework7/css/ionicons.css">
  <!-- <link rel="stylesheet" type="text/css" href="lib/framework7/css/framework7-icons.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"> -->
  <link rel="stylesheet" href="lib/framework7/css/framework7.material.min.css">
  <link rel="stylesheet" href="lib/framework7/css/framework7.material.colors.min.css">

</head>

<body>
<div class="page" data-page="index">
    <!-- <div class="content-block"> -->
    <!-- Buttons row as tabs controller -->
    <div class="statusbar-overlay"></div>
    <div class="page theme-blue" >
    <div class="page layout-dark">
      
    <div class="panel-overlay"></div>
    <!-- Left panel with reveal effect-->
      
    <div class="panel panel-left panel-reveal">
      <div class="content-block-title" align="center">
        <h2>LOGO</h2>
      </div>
      <div class="list-block">
      <!-- <div class="list-group"> -->
        <ul>
          <li class="item-content list-panel-profile close-panel item-link">
            <div class="item-media"><i class="icon ion-ios7-person"></i></div>
            <div class="item-inner">
              <div class="item-title" id="profileID">Profile</div>
            </div>
          </li>
          <li class="item-content item-link">
            
            <div class="item-media"><i class="icon ion-ios7-star"></i></div>
            <div class="item-inner">
              <div class="item-title" >
                <a href="#" id="prefID" class="link">Preferences</a>
                </div>
            </div>
          
          </li>
          <li class="item-content list-panel-logout close-panel item-link">
            <div class="item-media"><i class="icon ion-ios7-close"></i></div>
            <div class="item-inner">
              <div class="item-title" id="logoutID">Log out</div>
            </div>
          </li>

        </ul>
      
      </div>   
     <!-- <footer align="center">DBIT</footer> -->
    </div>
    </div>
      
    </div>

  <div class="page-content">

    <div class="views">
      <!--
      We use Through-type Navbar layout for dynamic navbar.
      So we keep Navbar as the child of View, and have "navbar-through" class on View
      -->
      <div class="view view-main navbar-through">
        <div class="navbar">
          <div class="navbar-inner">
          <div class="right">
                        <a href="#" id="toggleID" class="link icon-only open-panel"><i class="icon icon-bars"></i></a>
                    </div>
            <div class="center sliding">Bling</div>
          </div>
        </div>
        <div class="pages">
          <div data-page="index" class="page">
            <div class="page-content">

              <div class="list-block cards-list">
                <ul>
                  <li class="card">
                    <div class="card-content">
                      <div class="card-content-inner">
                        <div class="item-content">
                          <div class="item-inner">
                            <div class="item-title floating-label">ID</div>
                            <div class="item-input">
                              <input type="number" id="id">
                            </div>

                            <div class="item-title floating-label">Password</div>
                            <div class="item-input">
                              <input type="password" id="pass">
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <p>
                      <a class="button button-raised button-fill button-big color-blue" id="login">Login</a>
                    </p>
                    <p>
                      <a href="register.html" class="button button-raised button-fill button-big color-red">Register</a>
                    </p>
                  </li>
                </ul>
                <!-- Screen for enabling/disabling notifications from various Student Chapters
                 -->
                 <p>
                <a href="pages/prefer.html" class="button button-fill button-big color-green">PREFERENCES</a>
                </p> 
                
                <!-- Button to received messages testing page -->
                <p><a href="view-message.html" class="button button-fill button-big color-indigo">VIEW MESSAGE</a></p>
                
                <!-- Dummy button to directly open after login page when using an emulator -->
                <p><a href="dashboard.html" class="button button-fill button-big color-green">Login Success</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>



  <!--
    We need the following script to include styles depending on device's OS
    It is important to keep it as inline script or in separate JS file with this code only!
    -->

  <script type="text/javascript" src="cordova.js"></script>

  <script type="text/javascript" src="lib/framework7/js/framework7.min.js"></script>

  <script>
    (function () {
      if (Framework7.prototype.device.android) {
        Dom7('head').append(
          '<link rel="stylesheet" href="lib/framework7/css/framework7.material.min.css">' +
          '<link rel="stylesheet" href="lib/framework7/css/framework7.material.colors.min.css">'
        );
      } else {
        Dom7('head').append(
          '<link rel="stylesheet" href="lib/framework7/css/framework7.ios.min.css">' +
          '<link rel="stylesheet" href="lib/framework7/css/framework7.ios.colors.min.css">'
        );
      }


    })();

    var $$ = Dom7;


    $$('#login').on('click', function () {

      var id = $$("#id").val();
      var pass = $$("#pass").val();


      $$.ajax({
        type: "POST",
        url: "http://bling-test.000webhostapp.com/login.php",
        data: {
          id: id,
          pass: pass
        },
        crossDomain: true,
        cache: false,
        success: function (data) {

          if (data == "failed") {
            myApp.alert("Invalid ID/Password");
          } 

          else if(data == "student") {
            localStorage.id = id;
            mainView.router.loadPage('received-message.html');
          }

          else if(data == "faculty") {
            localStorage.id = id;
            mainView.router.loadPage('sent-message.html');
          }
        }
      });
    });
  </script>

  <script type="text/javascript">
    setTimeout(function () {
      try {

        if (window.FirebasePlugin == null) {

          alert("FCMPlugin is null")

          return;

        }

        window.FirebasePlugin.onTokenRefresh(function (token) {

          localStorage.token = token;
          alert(token);

        });

      } catch (e) {

        alert(e);

      }
    }, 1000);
  </script>

  <script src="js/my-app.js"></script>
</div>
</body>

</html>